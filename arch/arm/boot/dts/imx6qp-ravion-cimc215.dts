/*
 * Copyright 2018 Radioavionica Corp.
 *
 * Author: Alex A. Mihaylov <minimumlaw@rambler.ru>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 */
/dts-v1/;
#include "imx6qp.dtsi"
#include "imx6qdl-ravion-v2.dtsi"

/ {
	model = "ravion:cimc215";
	compatible = "ravion,imx6qp", "fsl,imx6qp";

	/*
	 * Device specific regulators
	 */
	pwr_src: regulator_power {
		compatible = "regulator-fixed";
		regulator-name = "BATT_IN";
		/* FixMe: 5...8.4V input voltage */
		regulator-min-microvolt = <8400000>;
		regulator-max-microvolt = <8400000>;
		regulator-boot-on;
		regulator-always-on;
	};

	p5v_reg: regulator_5v0 {
		compatible = "regulator-fixed";
		regulator-name = "P5V";
		regulator-min-microvolt = <5000000>;
		regulator-max-microvolt = <5000000>;
		vin-supply = <&pwr_src>;
		regulator-boot-on;
		regulator-always-on;
	};

	p3v3_reg: regulator_3v3 {
		compatible = "regulator-fixed";
		regulator-name = "P3V3";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		vin-supply = <&pwr_src>;
		regulator-boot-on;
		regulator-always-on;
	};

	p12v_reg: regulator_12v {
		compatible = "regulator-fixed";
		regulator-name = "P12V";
		regulator-min-microvolt = <12000000>;
		regulator-max-microvolt = <12000000>;
		vin-supply = <&pwr_src>;
		regulator-boot-on;
		regulator-always-on; /* XP61: enable/disable reg. */
	};

	va3v3_reg: regulator_3v3va {
		compatible = "regulator-fixed";
		regulator-name = "VA3V3";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		vin-supply = <&pwr_src>;
		regulator-boot-on;
		regulator-always-on;
	};
};

/*
 * Sound subsystem
 */
&ssi2	{	status = "disabled";	};

/*
 * Video subsystems
 */
/* HDMI */
&hdmi {		status = "okay";	};
/* TFT */
&tft_display_bus { status = "disabled"; };
/* LVDS */
&ldb {		status = "disabled";	};

/*
 * Serial ports
 */
&uart1 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart1>, <&pinctrl_uart1ctrl>;
	uart-has-rtscts;
	status = "okay";
};

&uart2 {	status = "okay";	};
&uart3 {	status = "okay";	};

/*
 * I2C Busses
 */
&i2c2 {	/* Compatible I2C: soDimm 194, 196 */
	status = "okay";

	owc: ds2482@18 { /* DS2484: I2C to OneWire Converter */
		status = "okay";
		compatible = "maxim,ds2482";
		reg = <0x18>;
	};
};

/* Extended I2C: soDimm 128, 130 */
&i2c3 {
	status = "okay";
	#address-cells = <1>;
	#size-cells = <0>;

	old-battery@34 { /* Very old battery */
		reg = <0x34>;
		compatible = "maxim,ds2782";
	};

	battery@b {
		compatible = "ti,bq20z75", "sbs,sbs-battery";
		reg = <0xb>;
		sbs,i2c-retry-count = <2>;
		sbs,poll-retry-count = <10>;
	};
};

&mipi_csi {	status = "disabled";	};

/*
 * SPI Bus
 */
&ecspi1 {	status = "disabled"; };

/*
 * SD/MMC and eMMC controllers
 */
&usdhc1 {	status = "okay";	}; /* compatible *
&usdhc2 {	status = "disabled";	}; /* externed *
/* &usdhc3 {	status = "okay";	}; => eMMC allways enabled *

/*
 * Ethernet controller
 */
/* &fec {	status = "okay";	}; => eth0 allways enabled *

/*
 * Audio (digital part)
 */
/* &audmux {	status = "okay";	}; => Allways enabled *
/* &ssi1 {	status = "okay";	}; => Allways enabled *

/*
 * High-speed serial bus
 */
&pcie {		status = "disabled";	};
&sata {		status = "disabled";	};

/* &usbh1 {	status = "okay";	}; HOST => Allways enabled *

&usbotg	{ /* OTG *
	status = "okay";
};

&usbh3 { /* HSIC *
	status = "disabled";
	#address-cells = <1>;
	#size-cells = <0>;
};

/*
 * PWMs
 */
&pwm3	{	status = "disabled";	};
&pwm4	{	status = "disabled";	};

